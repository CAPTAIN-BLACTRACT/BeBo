<main class="container">
  <div class="header">
    <h1>Beat Boxer </h1>

    <div class="controls">

      <button
      class="play-btn"
      [class.playing]="isPlaying()"
      (click)="tooglePlay()">
        {{ isPlaying() ? 'Stop' : 'Play'}}
      </button>

      <div
        class="bpm-control">
        <label>BPM: {{bpm()}}</label>
        <input
        type="range"
        min="60"
        max="240"
        [ngModel]="bpm()"
        (ngModelChange)="updateBpm($event)">
      </div>

      <button class="clear-btn" (click)="clearGrid()">Clear</button>

    </div>

  </div>

  <div class="sequencer">
    @for( track of tracks(); track $index ; let tIdx = $index){
    <div class="track-row">
      <div class="track-info" [style.border-left-color]="track.color">
        {{track.name}}
      </div>

      <div class="steps-grid">
        @for(step of track.steps; track $index; let sIdx= $index){
        <button
           class="step-btn"
           [class.active]="step"
           [class.current]="currentStep()===sIdx"
           [style.background-color]="step ? track.color :  ''"
           (click)="toogleStep(tIdx,sIdx)">
        </button>
        }

      </div>
    </div>
    }

  </div>
</main>
